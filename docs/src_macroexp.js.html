<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: src/macroexp.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: src/macroexp.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Contains all the Macro expressions which are exported as constants
 */

import { mkdirSync, existsSync, writeFileSync } from 'fs';
import * as os from 'os';
import * as path from 'path';
import {
  UNIX_DATAPATH,
  DARWIN_OSTYPE,
  LINUX_OSTYPE,
  WIN_OSTYPE,
  WIN_USERSDIR,
} from './constants.js';

/** The server's device username. */
export const USERNAME = os.userInfo().username;

/** The type of operating system the server is running on. */
export const OSTYPE = os.type();

/** The data path for the server (operating system-dependent) */
export const DATAPATH = (() => {
  if (OSTYPE == WIN_OSTYPE) {
    const winpath = path.join(WIN_USERSDIR, 'mcw');
    if (!existsSync(winpath)) mkdirSync(winpath);
  } else if ([LINUX_OSTYPE, DARWIN_OSTYPE].indexOf(OSTYPE) >= 0) {
    if (!existsSync(UNIX_DATAPATH)) mkdirSync(UNIX_DATAPATH);
    return UNIX_DATAPATH;
  } else {
    console.error(
      `Unsupported Operated System: ${OSTYPE}.\nMCW is only supported on Darwin/macOS, Linux, and Windows`
    );
  }
})();

/** The static datapath for the server (relative to the datapath) */
export const STATICPATH = (() => {
  const spath = path.join(DATAPATH, 'static');
  if (!existsSync(spath)) mkdirSync(spath);
  return spath;
})();

/** The path to modlist.json */
export const MODLIST_PATH = (() => {
  const mlpath = path.join(STATICPATH, 'modlist.json');
  if (!existsSync(mlpath)) writeFileSync(mlpath, '{}');
  return mlpath;
})();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AppLauncher.html">AppLauncher</a></li><li><a href="AppLauncher.AppLauncher.html">AppLauncher</a></li><li><a href="InstallerGUI.html">InstallerGUI</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AppRegistrar">AppRegistrar</a></li><li><a href="global.html#DARWIN_OSTYPE">DARWIN_OSTYPE</a></li><li><a href="global.html#DATAPATH">DATAPATH</a></li><li><a href="global.html#LINUX_OSTYPE">LINUX_OSTYPE</a></li><li><a href="global.html#MODLIST_PATH">MODLIST_PATH</a></li><li><a href="global.html#OSTYPE">OSTYPE</a></li><li><a href="global.html#registerMod">registerMod</a></li><li><a href="global.html#STATICPATH">STATICPATH</a></li><li><a href="global.html#UNIX_DATAPATH">UNIX_DATAPATH</a></li><li><a href="global.html#USERNAME">USERNAME</a></li><li><a href="global.html#WIN_OSTYPE">WIN_OSTYPE</a></li><li><a href="global.html#WIN_USERSDIR">WIN_USERSDIR</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Wed Jun 02 2021 03:25:23 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
